<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    function requestPOST(url, data, cb) {
        const iframe = document.createElement('iframe')

        iframe.name = 'iframePost'
        iframe.style.display = 'none'
        document.body.appendChild(iframe)

        const form = document.createElement('form')
        // input用来存放post提交的数据
        const input = document.createElement('input')

        iframe.addEventListener('load', function (res) {
            console.log('load成功');
            if (cb && typeof cb == 'function') {
                cb(res)
            }
        })

        form.action = url
        form.target = iframe.name
        form.method = 'post'

        Object.keys(data).forEach(key => {
            input.name = key
            input.value = data[key].toString()
            form.appendChild(input.cloneNode())
        })

        form.style.display = 'none'
        document.body.appendChild(form)
        form.submit()
        console.log('表单提交');

        document.body.removeChild(form)
    }

    // 业务场景调用
    requestPOST('http://localhost:8888/iframe_form', {
        data: 'Hello World'
    }, (response) => {
        console.log('response', response)
    })
</script>

</html>